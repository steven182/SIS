<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://xmlns.jcp.org/jsf/html"
             xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
             xmlns:f="http://xmlns.jcp.org/jsf/core"
             xmlns:p="http://primefaces.org/ui">
    <h3 class="titulos" style="color: #009ed6; margin-bottom: 33px;">Crear Cotización</h3>
    <div class="container">
        <div class="row">
            <f:view>
                <h:form rendered="#{personaSession.personaSesion.rolIdRol.idRol == 2}"> 
                        <p:outputLabel value="Fecha Cotización:" for="fechaCotizacion" />
                        <p:inputText id="fechaCotizacion" value="#{cotizacionSession.detalleCotizacion.fechaCotizacion}" title="FechaCotizacion" 
                                     class="datepicker">
                            <f:convertDateTime pattern="yyyy/MM/dd"/>
                        </p:inputText>
                        <p:outputLabel value="Productos:" for="asignacionidAsignacion" />
                        <p:selectManyMenu id="asignacionidAsignacion" value="#{cotizacionSession.listAsignacion}" 
                                          required="true" requiredMessage="The AsignacionidAsignacion field is required."
                                          filter="true" filterMatchMode="contains" showCheckbox="true" converter="asignacion">
                            <!-- TODO: update below reference to list of available items-->
                            <f:selectItems value="#{asignacionProductosSession.listaProductosAdmin}" />
                        </p:selectManyMenu>
                        <p:outputLabel value="Cliente:" for="personaidPersona" />
                        <p:selectOneMenu id="personaidPersona" value="#{cotizacionSession.detalleCotizacion.personaidPersona}" required="true" requiredMessage="The PersonaidPersona field is required.">
                            <!-- TODO: update below reference to list of available items-->
                            <f:selectItems value="#{personaSession.listaUsuarioSessionContrato}" />
                        </p:selectOneMenu>
                        <p:outputLabel value="Descripción:" for="Descripcion" />
                        <p:inputText id="Descripcion" value="#{cotizacionSession.cotizacion.descripcion}" title="Descripcion" />
                        <p:commandButton value="#{os.btnIngresarDetalleOrden}" action="#{cotizacionSession.crearCotizacion()}" 
                                    ajax="false" resetValues="true"/>
                </h:form>
                <h:form rendered="#{personaSession.personaSesion.rolIdRol.idRol == 1}" id="formCotAdmin">
                        <p:outputLabel value="Número de Cotización:" for="numCot" />
                        <p:inputText id="numCot" value="#{cotizacionSession.detalleCotizacion.idDetalleCotizacion}" title="idCotizacion" readonly="true"/>
                        <p:outputLabel value="Cliente:" for="clt" />
                        <p:inputText id="clt" value="#{cotizacionSession.detalleCotizacion.personaidPersona.primernombre}" title="Cliente" readonly="true"/>
                        <p:outputLabel value="Valor Cotización:" for="valorCotizacion" />
                        <p:inputText id="valorCotizacion" value="#{cotizacionSession.detalleCotizacion.valorCotizacion}" title="ValorCotizacion"/>
                        <p:outputLabel value="Descripción:" for="Descripcion" />
                        <p:inputText id="Descripcion" value="#{cotizacionSession.cotizacion.descripcion}" title="Descripcion" readonly="true"/>
                        <p:outputLabel value="Respuesta:" for="Descrip" />
                        <p:inputText id="Descrip" value="#{cotizacionSession.detalleCotizacion.descripcionAdmin}" title="Descripcion Final" />
                        <p:commandButton value="Enviar" action="#{cotizacionSession.editEnvioCotAdmin()}" 
                                    ajax="false" resetValues="true"/>
                </h:form>
            </f:view>

        </div>
    </div>
</ui:fragment>